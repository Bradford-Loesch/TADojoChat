<script type="text/javascript">
// $('.container-fluid').slicknav({
//   label: '',
//   duration: 300,
//   easingOpen: "swing",
//   prependTo: '#top'
// });
function openNav() {
  document.getElementById("mySidenav").style.width = "200px";
  document.getElementById("main").style.marginLeft = "250px";
}
/* Set the width of the side navigation to 0 and the left margin of the page content to 0 */
function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
  document.getElementById("main").style.marginLeft = "0"
}
console.log(screen.width)
if(screen.width > 700){
  openNav()
}
console.log(document.getElementById("mySidenav").style.width)
</script>

<div ng-controller="MessageController">

  <div id="mySidenav" class="sidenav" ng-controller="UserController" ng-init="index()">
    <select ng-change="updateStyle(selectedStyle)" ng-model="selectedStyle">
      <option selected ng-repeat="style in styles" value="{{style.key}}">{{style.label}}</option>
    </select>

    <p>Hello {{user.username}}</p>
    <div id="chatroomAvatar" style="background-image:url('/avatar/{{user.id}}')"></div>
    <a class="closebtn" id="chatroomToggle" onclick="closeNav()">&times;</a>
    <a href="/#!/rooms">Home</a>
    <a href="/#!/chatroom">My Account</a>
    <p>Other users in this room</p>

    <a ng-repeat="user in allUsers" href="/#!/user/{{user.id}}">{{user.username}}</a>
    <p>Other chatrooms</p>
    <a>chatroom</a>
    <a>chatroom</a>
    <a>chatroom</a>
    <a>chatroom</a>
  </div> <!-- Use any element to open the sidenav -->
  <div id="main">
    <button id="chatroomToggle" type="button" onclick="openNav()" class="btn btn-default" aria-label="Left Align">
      <span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>
    </button>
    <ul id="menu">
      <li><a href="/#!/rooms">Home</a></li>
      <li>Chatrooms
        <ul>
          <li><a href="/#!/chatroom/1">chatroom1</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<div id="chatWrapper" ng-class="selectedClass" ng-controller="MessageController">
  <!-- <test> -->
  <div class="container-fluid">
    <h3>chatroom1</h3>
    <br>
    <p>time message was sent</p>
    <br>

    <div class="messagecontainer" ng-repeat = "item in allMessages">
      <div class="row" ng-if="item.username == user.username">
        <div class="col-xs-6 col-sm-6">
          <p>{{ item.username }} {{ item.created_at }}</p>
        </div>
        <div class="col-xs-6 col-sm-6">
          <div class="userMessage">
            <p>{{ item.message }}</p>
          </div>
        </div>
      </div> <!-- End of user message row -->

      <div class="row" ng-if="item.username != user.username">
        <div class="col-xs-6 col-sm-6">
          <div class="guestMessage">
            <p>{{ item.message }}</p>
          </div>
        </div>
        <div class="col-xs-6 col-sm-6">
          <p>{{ item.username }} {{ item.created_at }}</p>
        </div>
      </div> <!-- End of guest message row -->
    </div>

    <!-- End of message container -->
    <div id="formBottom" class="row">
      <form class="form-inline">
        <div class="form-group">
          <label for="messageinput"></label>
          <input id="userForm" type="text" class="form-control" ng-model="message.content">
        </div>
        <button id="buttonForm" class="btn btn-default" ng-click="sendMessage()">Send</button>
      </form>
    </div>

    <h3>{{time}}</h3>
    <br>
    <div id="text">
      <div ng-repeat = "item in allMessages">
        <div ng-if="item.username == user.username">
          <p>{{ item.message }}</p>
          <h5>{{ item.username }} Said at {{ item.created_at | date: "shortTime"}}</h5>
        </div> <!-- End of user message row -->
        <div ng-if="item.username != user.username">
          <p>{{item.message}}</p>
          <h5>{{ item.username }} Said at {{ item.created_at | date: "shortTime"}}</h5>
        </div>
      </div> <!-- End of guest message row -->
    </div>
    <div id="chatBottom">
      <form>
        <label for="messageinput"></label>
        <input  type="text" ng-model="message.content">
        <button id="buttonForm" class="btn btn-default" ng-click="sendMessage()">Send</button>
      </form>
    </div>
  </div>
</div>
</div>

<!-- Add all page content inside this div if you want the side nav to push page content to the right (not used if you only want the sidenav to sit on top of the page -->

<!-- <button ng-if="document.getElementById('main').style.marginLeft == null" onclick="openNav()" >Measfafas</button> -->
